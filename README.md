# M100A 非LoRaWAN 串口数据透传模块使用说明

---

##模块的工作模式

###模块有两种工作模式：配置模式和透传模式。


- 配置模式
如何进入配置模式？在模块上电启动前通过将模块的 MODE_SET 引脚接高电平（3.3V or 5V）并一直保持，然后给模块上电或复位即可进入配置模式。
配置模式能做什么？进入配置模式后的模块只能进行模块的参数配置，配置参数可以使用 M100A 非 LoRaWAN 配置工具进行相应的修改。
- 透传模式
如何进入透传模式？在模块上电启动前通过将模块的 MODE_SET 引脚**接地**，然后在给模块上电或复位即可进入透传模式。
透传模式能做什么？透传模式的工作过程：模块上电后会进入射频接收状态，当收到正确格式的串口数据时会停止射频接收，然后模块会把串口数据通过射频发送（广播）出去，模块会再次进入射频接收状态。当收到射频数据时，模块会通过串口发送出去，然后再次进入射频接收状态。

##模块接口介绍

- 通讯串口
RX：模块丝印为 UART1_RX，TX：模块丝印为 UART1_TX。
debug 打印输出脚：模块丝印 UART3_TX。
Debug 串口的参数为：115200bps，8E1，无奇偶校验。不支持工具修改。
通信串口的参数支持工具修改。
- 供电
VCC：模块丝印为 VIN，GND：模块丝印为 GND。
- 烧录
SWIM 方式，RESET：模块丝印为 SX_RESET，SWIM：模块丝印为 SWIM。
- LED 指示
  模块上电启动时，LED 会亮一秒后灭掉。
- 其他接口
目前其他接口均未使用。

---

##串口透传数据帧格式（协议）

|起始符|Payload 长度|Payload|结束符|
|---|---|---|---|
|0xFE|1Byte|0～252 Byte |0xEF|

- Payload 为实际需要传输的数据。
- 整个数据帧应小于255字节。
- 当发送**252**字节数据使用 SF12 BW125K 时，所需要的时间约**10秒**才能发送完成。


###模块串口返回值说明

|返回值|帧内容（Hex）|说明|
|---|---|---|
|0x00|FE 01 **00** EF|模块透传数据发送失败|
|0xFF|FE 01 **FF** EF|模块透传数据发送成功|

---

2016-11-15, V1.0.0
*模块工作方式介绍：

1. 支持将串口数据通过 LoRa 方式进行发送。
2. 支持将 LoRa 方式接收到的数据发送至串口。
3. 模块上电初始化完成后一直处于 LoRa 接收状态。
4. 模块将串口数据通过 LoRa 方式发送完成后，会进入 LoRa 接收状态。
